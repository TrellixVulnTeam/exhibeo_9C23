{"ast":null,"code":"import _regeneratorRuntime from\"/Users/charlie/code/ex/exhiibeo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _taggedTemplateLiteral from\"/Users/charlie/code/ex/exhiibeo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _asyncToGenerator from\"/Users/charlie/code/ex/exhiibeo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/charlie/code/ex/exhiibeo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/charlie/code/ex/exhiibeo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _templateObject;var _excluded=[\"className\",\"topOuterDivider\",\"bottomOuterDivider\",\"hideNav\",\"hideSignin\",\"topDivider\",\"bottomDivider\",\"hasBgColor\",\"invertColor\"];import React,{useState,useEffect}from'react';import Masonry from'masonry-layout';import imagesLoaded from'imagesloaded';import infgif from'./img/infloading.gif';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var defaultProps={navPosition:'',hideNav:false,hideSignin:false,bottomOuterDivider:false,bottomDivider:false};var Hero=function Hero(_ref){var className=_ref.className,topOuterDivider=_ref.topOuterDivider,bottomOuterDivider=_ref.bottomOuterDivider,hideNav=_ref.hideNav,hideSignin=_ref.hideSignin,topDivider=_ref.topDivider,bottomDivider=_ref.bottomDivider,hasBgColor=_ref.hasBgColor,invertColor=_ref.invertColor,props=_objectWithoutProperties(_ref,_excluded);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setloading=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),usernameGood=_useState4[0],setUsernameGood=_useState4[1];var query=\"\\n  query collectorGallery($address: String!) {\\n    hic_et_nunc_token_holder(where: {holder_id: {_eq: $address}, quantity: {_gt: \\\"0\\\"}, token: {supply: {_gt: \\\"0\\\"}}}, order_by: {id: desc}) {\\n      token {\\n        id\\n        artifact_uri\\n        display_uri\\n        thumbnail_uri\\n        timestamp\\n        mime\\n        title\\n        description\\n        supply\\n        token_tags {\\n          tag {\\n            tag\\n          }\\n        }\\n        creator {\\n          address\\n        }\\n        swaps(where: {status: {_eq: \\\"0\\\"}}, order_by: {price: asc}) {\\n          amount\\n          amount_left\\n          creator_id\\n          price\\n        }\\n      }\\n    }\\n  }\\n  \";//todo make it say emit sucks if he uses his username\nfunction fetchGraphQL(_x,_x2,_x3){return _fetchGraphQL.apply(this,arguments);}function _fetchGraphQL(){_fetchGraphQL=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(operationsDoc,operationName,variables){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.hicdex.com/v1/graphql\",{method:\"POST\",body:JSON.stringify({query:operationsDoc,variables:variables,operationName:operationName})});case 2:result=_context.sent;_context.next=5;return result.json();case 5:return _context.abrupt(\"return\",_context.sent);case 6:case\"end\":return _context.stop();}}},_callee);}));return _fetchGraphQL.apply(this,arguments);}var objktidArray=[];function doFetch(_x4){return _doFetch.apply(this,arguments);}function _doFetch(){_doFetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(wallet){var _yield$fetchGraphQL,errors,data,result,linkarray,i,link,linkstring,objkt,grid,imgLoad;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setloading(true);_context2.next=3;return fetchGraphQL(query,\"collectorGallery\",{\"address\":wallet});case 3:_yield$fetchGraphQL=_context2.sent;errors=_yield$fetchGraphQL.errors;data=_yield$fetchGraphQL.data;if(errors){console.error(errors);}result=data.hic_et_nunc_token_holder;linkarray=[];//array of ipfs links for the img divs\nfor(i=0;i<result.length;i++){link=result[i].token.display_uri.split('/');linkstring=\"https://ipfs.io/ipfs/\"+link[2];linkarray[i]=linkstring;objkt=result[i].token.id;objktidArray[i]=objkt;}_context2.next=12;return showImages(linkarray);case 12:grid=document.querySelector('.grid');imgLoad=imagesLoaded(grid);setloading(false);changeVisibility();imgLoad.on('progress',function(instance,image){//   var result = image.isLoaded ? 'loaded' : 'broken';\n//   console.log( 'image is ' + result + ' for ' + image.img.src );\nloadmason();});case 17:case\"end\":return _context2.stop();}}},_callee2);}));return _doFetch.apply(this,arguments);}function loadmason(){var grid=document.querySelector('.grid');new Masonry(grid,{itemSelector:'.grid-item',percentPosition:true});}function showImages(imgArray){var count=0;for(var i=0;i<imgArray.length;i++){var inarray=false;if(imagelist.indexOf(objktidArray[i])>-1){inarray=true;count=count+1;}if(inarray){var div=document.createElement(\"a\");div.className=\"grid-item\";div.id=objktidArray[i];var linka=\"https://www.hicetnunc.xyz/objkt/\"+objktidArray[i];div.href=linka;div.style=\"width: 33%;\";document.getElementById(\"imageGallery\").appendChild(div);var img=new Image();img.src=imgArray[i];img.style=\"width: 100%;\";if(i<20){img.className=\"images\";}else{img.className=\"images2\";}var idd=objktidArray[i];document.getElementById(idd).appendChild(img);}}if(count===0){window.location.href=\"/\";console.log(\"account page\");}var elem=document.getElementsByClassName('grid-item');if(elem.length<4){for(var j=0;j<elem.length;++j){var item=elem[j];item.style.width=\"100%\";}}}function changeVisibility(){var vis=document.getElementById(\"imageGallery\").style.visibility;if(vis==='hidden'){document.getElementById(\"imageGallery\").style.visibility='visible';}}useEffect(function(){var urllink=window.location.href.toString();var arrlink=urllink.split(\"?\");var username=arrlink[1];if(username){getDatas(username);}},[]);function isValid(_x5){return _isValid.apply(this,arguments);}function _isValid(){_isValid=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(wallet){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(wallet.length===36){doFetch(wallet);}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return _isValid.apply(this,arguments);}var imagelist=\"\";//from get, list of images user wants to display\nfunction getDatas(username){var good=false;var axios=require('axios');axios.get('https://api.better-call.dev/v1/contract/mainnet/KT1V69m3Q6yAwQfo1PgFDVUeWgmtu52J2JEx/storage',{}).then(function(res){for(var i in res.data[0].children){if(res.data[0].children[i].children[1].value===username){imagelist=res.data[0].children[i].children[0].value;good=true;isValid(res.data[0].children[i].name);}}if(!good){setUsernameGood(false);}}).catch(function(error){console.error(error);});}var Styledp=styled.p(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  border-top-style: hidden;\\n  border-right-style: hidden;\\n  border-left-style: hidden;\\n  border-bottom-style: hidden;\\n  width: 70vw;\\n  text-align: center;\\n  margin: 0px auto;\\n  margin-top; 30px\\n  margin-top; 30px\\n  display: block;\\n  background-color: #00000;\\n  color: white;\\n  font-size: medium;\\n  \\n  \"])));return/*#__PURE__*/_jsxs(\"section\",{children:[!usernameGood&&/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsx(Styledp,{style:{padding:\"10px\",paddingTop:\"25px\"},children:\"Invalid link/username\"}),/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:\"20px\",paddingBottom:\"20px\"}}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",style:{padding:\"10px\",minWidth:\"100px\",textDecoration:\"underline\"},children:\"Click here to create an exhibit\"})})]}),loading&&/*#__PURE__*/_jsx(\"div\",{style:{alignItems:\"center\",justifyContent:\"center\",display:\"flex\"},children:/*#__PURE__*/_jsx(\"img\",{src:infgif,alt:\"loading...\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"imageGallery\",style:{visibility:\"hidden\"},className:\"grid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid-sizer\"})})]});};Hero.defaultProps=defaultProps;export default Hero;","map":{"version":3,"sources":["/Users/charlie/code/ex/exhiibeo/src/components/sections/Hero.js"],"names":["React","useState","useEffect","Masonry","imagesLoaded","infgif","styled","defaultProps","navPosition","hideNav","hideSignin","bottomOuterDivider","bottomDivider","Hero","className","topOuterDivider","topDivider","hasBgColor","invertColor","props","loading","setloading","usernameGood","setUsernameGood","query","fetchGraphQL","operationsDoc","operationName","variables","fetch","method","body","JSON","stringify","result","json","objktidArray","doFetch","wallet","errors","data","console","error","hic_et_nunc_token_holder","linkarray","i","length","link","token","display_uri","split","linkstring","objkt","id","showImages","grid","document","querySelector","imgLoad","changeVisibility","on","instance","image","loadmason","itemSelector","percentPosition","imgArray","count","inarray","imagelist","indexOf","div","createElement","linka","href","style","getElementById","appendChild","img","Image","src","idd","window","location","log","elem","getElementsByClassName","j","item","width","vis","visibility","urllink","toString","arrlink","username","getDatas","isValid","good","axios","require","get","then","res","children","value","name","catch","Styledp","p","textAlign","padding","paddingTop","paddingBottom","minWidth","textDecoration","alignItems","justifyContent","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Masonry from 'masonry-layout';\nimport imagesLoaded from 'imagesloaded';\nimport infgif from './img/infloading.gif'\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst propTypes = {\n  navPosition: PropTypes.string,\n  hideNav: PropTypes.bool,\n  hideSignin: PropTypes.bool,\n  bottomOuterDivider: PropTypes.bool,\n  bottomDivider: PropTypes.bool,\n\n}\n\nconst defaultProps = {\n  navPosition: '',\n  hideNav: false,\n  hideSignin: false,\n  bottomOuterDivider: false,\n  bottomDivider: false\n}\nconst Hero = ({\n  className,\n  topOuterDivider,\n  bottomOuterDivider,\n  hideNav,\n  hideSignin,\n  topDivider,\n  bottomDivider,\n  hasBgColor,\n  invertColor,\n  ...props\n}) => {\n  const [loading, setloading] = useState(false);\n  const [usernameGood, setUsernameGood] = useState(true);\n  const query = `\n  query collectorGallery($address: String!) {\n    hic_et_nunc_token_holder(where: {holder_id: {_eq: $address}, quantity: {_gt: \"0\"}, token: {supply: {_gt: \"0\"}}}, order_by: {id: desc}) {\n      token {\n        id\n        artifact_uri\n        display_uri\n        thumbnail_uri\n        timestamp\n        mime\n        title\n        description\n        supply\n        token_tags {\n          tag {\n            tag\n          }\n        }\n        creator {\n          address\n        }\n        swaps(where: {status: {_eq: \"0\"}}, order_by: {price: asc}) {\n          amount\n          amount_left\n          creator_id\n          price\n        }\n      }\n    }\n  }\n  `;\n\n//todo make it say emit sucks if he uses his username\n  async function fetchGraphQL(operationsDoc, operationName, variables) {\n    const result = await fetch(\n      \"https://api.hicdex.com/v1/graphql\",\n      {\n        method: \"POST\",\n        body: JSON.stringify({\n          query: operationsDoc,\n          variables: variables,\n          operationName: operationName\n        })\n      }\n    );\n\n    return await result.json();\n  }\n  var objktidArray = [];\n\n  async function doFetch(wallet) {\n    setloading(true)\n    const { errors, data } = await fetchGraphQL(query, \"collectorGallery\", { \"address\": wallet });\n    if (errors) {\n      console.error(errors);\n    }\n    const result = data.hic_et_nunc_token_holder\n\n    var linkarray = [] //array of ipfs links for the img divs\n    for (var i = 0; i < result.length; i++) {\n      var link = result[i].token.display_uri.split('/')\n      var linkstring = \"https://ipfs.io/ipfs/\" + link[2];\n      linkarray[i] = linkstring\n      var objkt = result[i].token.id\n      objktidArray[i] = objkt\n    }\n    await showImages(linkarray)\n    var grid = document.querySelector('.grid');\n    var imgLoad = imagesLoaded( grid );\n    setloading(false)\n    changeVisibility()\n    imgLoad.on( 'progress', function( instance, image ) {\n    //   var result = image.isLoaded ? 'loaded' : 'broken';\n    //   console.log( 'image is ' + result + ' for ' + image.img.src );\n      loadmason()\n    });\n  }\n  function loadmason() {\n    var grid = document.querySelector('.grid');\n    new Masonry(grid, {\n      itemSelector: '.grid-item',\n      percentPosition: true\n    });\n\n  }\n  function showImages(imgArray) {\n    var count = 0\n    for (var i = 0; i < imgArray.length; i++) {\n      var inarray = false\n      if (imagelist.indexOf(objktidArray[i]) > -1) {\n        inarray = true\n        count = count + 1\n      }\n      if (inarray) {\n        var div = document.createElement(\"a\");\n        div.className = \"grid-item\"\n        div.id = objktidArray[i]\n\n        var linka = \"https://www.hicetnunc.xyz/objkt/\" + objktidArray[i]\n        div.href = linka\n        div.style = \"width: 33%;\"\n        document.getElementById(\"imageGallery\").appendChild(div);\n\n        var img = new Image();\n        img.src = imgArray[i]\n        img.style = \"width: 100%;\"\n        if (i < 20) {\n          img.className = \"images\"\n        }\n        else {\n          img.className = \"images2\"\n        }\n        var idd = objktidArray[i]\n\n        document.getElementById(idd).appendChild(img);\n\n      }\n\n    }\n    if (count === 0) {\n      window.location.href = \"/\";\n      console.log(\"account page\")\n    }\n    var elem = document.getElementsByClassName('grid-item');\n    if (elem.length < 4) {\n      for (var j = 0; j < elem.length; ++j) {\n        var item = elem[j];\n        item.style.width = \"100%\"\n      }\n    }\n\n  }\n\n  function changeVisibility() {\n    const vis = document.getElementById(\"imageGallery\").style.visibility;\n    if (vis === 'hidden') {\n      document.getElementById(\"imageGallery\").style.visibility = 'visible'\n\n    }\n  }\n\n  useEffect(() => {\n    const urllink = window.location.href.toString();\n\n    const arrlink = urllink.split(\"?\");\n    const username = arrlink[1]\n    if (username) {\n      getDatas(username)\n    }\n  }, [])\n\n  async function isValid(wallet) {\n    if (wallet.length === 36) {\n      doFetch(wallet)\n    }\n\n  }\n  var imagelist = \"\"//from get, list of images user wants to display\n\n  function getDatas(username) {\n    var good = false\n    const axios = require('axios')\n    axios\n      .get('https://api.better-call.dev/v1/contract/mainnet/KT1V69m3Q6yAwQfo1PgFDVUeWgmtu52J2JEx/storage', {\n      })\n      .then(res => {\n        for (var i in res.data[0].children) {\n          if (res.data[0].children[i].children[1].value === username) {\n            imagelist = res.data[0].children[i].children[0].value\n            good = true\n            isValid(res.data[0].children[i].name)\n          }\n        }\n        if(!good){\n          setUsernameGood(false)\n        }\n      })\n      .catch(error => {\n        console.error(error)\n      })\n\n  }\n  const Styledp = styled.p`\n  border-top-style: hidden;\n  border-right-style: hidden;\n  border-left-style: hidden;\n  border-bottom-style: hidden;\n  width: 70vw;\n  text-align: center;\n  margin: 0px auto;\n  margin-top; 30px\n  margin-top; 30px\n  display: block;\n  background-color: #00000;\n  color: white;\n  font-size: medium;\n  \n  `;\n \n  return (\n\n    <section\n    >\n   {!usernameGood && <div style={{ textAlign: \"center\" }}>\n          <Styledp style={{ padding: \"10px\", paddingTop:\"25px\" }}>Invalid link/username</Styledp>\n          <div style={{ paddingTop: \"20px\", paddingBottom: \"20px\" }}>\n          </div>\n          <p><a href=\"/\"  style={{ padding: \"10px\", minWidth: \"100px\", textDecoration:\"underline\" }}>Click here to create an exhibit</a></p>\n        </div>}\n      {loading && <div style={{ alignItems: \"center\", justifyContent: \"center\", display: \"flex\" }} ><img src={infgif} alt=\"loading...\" /></div>}\n      <div id='imageGallery' style={{ visibility: \"hidden\" }} className=\"grid\">\n        <div className=\"grid-sizer\"></div>\n      </div>\n    </section>\n  );\n}\n\nHero.propTypes = propTypes;\nHero.defaultProps = defaultProps;\n\nexport default Hero;"]},"metadata":{},"sourceType":"module"}