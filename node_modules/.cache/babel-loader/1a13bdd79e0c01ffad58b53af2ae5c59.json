{"ast":null,"code":"var _jsxFileName = \"/Users/charlie/code/ex/exhiibeo/src/components/sections/Hero.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Masonry from 'masonry-layout';\nimport imagesLoaded from 'imagesloaded';\nimport infgif from './img/infloading.gif';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst propTypes = {\n  navPosition: PropTypes.string,\n  hideNav: PropTypes.bool,\n  hideSignin: PropTypes.bool,\n  bottomOuterDivider: PropTypes.bool,\n  bottomDivider: PropTypes.bool\n};\nconst defaultProps = {\n  navPosition: '',\n  hideNav: false,\n  hideSignin: false,\n  bottomOuterDivider: false,\n  bottomDivider: false\n};\n\nconst Hero = ({\n  className,\n  topOuterDivider,\n  bottomOuterDivider,\n  hideNav,\n  hideSignin,\n  topDivider,\n  bottomDivider,\n  hasBgColor,\n  invertColor,\n  ...props\n}) => {\n  _s();\n\n  const [loading, setloading] = useState(false);\n  const [usernameGood, setUsernameGood] = useState(true);\n  const query = `\n  query collectorGallery($address: String!) {\n    hic_et_nunc_token_holder(where: {holder_id: {_eq: $address}, quantity: {_gt: \"0\"}, token: {supply: {_gt: \"0\"}}}, order_by: {id: desc}) {\n      token {\n        id\n        artifact_uri\n        display_uri\n        thumbnail_uri\n        timestamp\n        mime\n        title\n        description\n        supply\n        token_tags {\n          tag {\n            tag\n          }\n        }\n        creator {\n          address\n        }\n        swaps(where: {status: {_eq: \"0\"}}, order_by: {price: asc}) {\n          amount\n          amount_left\n          creator_id\n          price\n        }\n      }\n    }\n  }\n  `; //todo make it say emit sucks if he uses his username\n\n  async function fetchGraphQL(operationsDoc, operationName, variables) {\n    const result = await fetch(\"https://api.hicdex.com/v1/graphql\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        query: operationsDoc,\n        variables: variables,\n        operationName: operationName\n      })\n    });\n    return await result.json();\n  }\n\n  var objktidArray = [];\n\n  async function doFetch(wallet) {\n    setloading(true);\n    const {\n      errors,\n      data\n    } = await fetchGraphQL(query, \"collectorGallery\", {\n      \"address\": wallet\n    });\n\n    if (errors) {\n      console.error(errors);\n    }\n\n    const result = data.hic_et_nunc_token_holder;\n    var linkarray = []; //array of ipfs links for the img divs\n\n    for (var i = 0; i < result.length; i++) {\n      var link = result[i].token.display_uri.split('/');\n      var linkstring = \"https://ipfs.io/ipfs/\" + link[2];\n      linkarray[i] = linkstring;\n      var objkt = result[i].token.id;\n      objktidArray[i] = objkt;\n    }\n\n    await showImages(linkarray);\n    var posts = document.querySelectorAll('.images');\n    imagesLoaded(posts, function () {\n      loadmason();\n      setloading(false);\n      changeVisibility();\n    });\n    var posts2 = document.querySelectorAll('.images2');\n    imagesLoaded(posts2, function () {\n      loadmason();\n    });\n  }\n\n  function showImages(imgArray) {\n    var count = 0;\n\n    for (var i = 0; i < imgArray.length; i++) {\n      var inarray = false;\n\n      if (imagelist.indexOf(objktidArray[i]) > -1) {\n        inarray = true;\n        count = count + 1;\n      }\n\n      if (inarray) {\n        var div = document.createElement(\"a\");\n        div.className = \"grid-item\";\n        div.id = objktidArray[i];\n        var linka = \"https://www.hicetnunc.xyz/objkt/\" + objktidArray[i];\n        div.href = linka;\n        div.style = \"width: 33%;\";\n        document.getElementById(\"imageGallery\").appendChild(div);\n        var img = new Image();\n        img.src = imgArray[i];\n        img.style = \"width: 100%;\";\n\n        if (i < 20) {\n          img.className = \"images\";\n        } else {\n          img.className = \"images2\";\n        }\n\n        var idd = objktidArray[i];\n        document.getElementById(idd).appendChild(img);\n      }\n    }\n\n    if (count === 0) {\n      window.location.href = \"/\";\n      console.log(\"account page\");\n    }\n\n    var elem = document.getElementsByClassName('grid-item');\n\n    if (elem.length < 4) {\n      for (var j = 0; j < elem.length; ++j) {\n        var item = elem[j];\n        item.style.width = \"100%\";\n      }\n    }\n  }\n\n  function loadmason() {\n    var grid = document.querySelector('.grid');\n    new Masonry(grid, {\n      itemSelector: '.grid-item',\n      percentPosition: true\n    });\n  }\n\n  function changeVisibility() {\n    const vis = document.getElementById(\"imageGallery\").style.visibility;\n\n    if (vis === 'hidden') {\n      document.getElementById(\"imageGallery\").style.visibility = 'visible';\n    }\n  }\n\n  useEffect(() => {\n    const urllink = window.location.href.toString();\n    const arrlink = urllink.split(\"?\");\n    const username = arrlink[1];\n\n    if (username) {\n      getDatas(username);\n    }\n  }, []);\n\n  async function isValid(wallet) {\n    if (wallet.length === 36) {\n      doFetch(wallet);\n    }\n  }\n\n  var imagelist = \"\"; //from get, list of images user wants to display\n\n  function getDatas(username) {\n    var good = false;\n\n    const axios = require('axios');\n\n    axios.get('https://api.better-call.dev/v1/contract/mainnet/KT1VTp8ZBBrScQmVVTZRoQE28gx4fMWTTW6b/storage', {}).then(res => {\n      for (var i in res.data[0].children) {\n        if (res.data[0].children[i].children[1].value === username) {\n          imagelist = res.data[0].children[i].children[0].value;\n          good = true;\n          isValid(res.data[0].children[i].name);\n        }\n      }\n\n      if (!good) {\n        setUsernameGood(false);\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  const Styledp = styled.p`\n  border-top-style: hidden;\n  border-right-style: hidden;\n  border-left-style: hidden;\n  border-bottom-style: hidden;\n  width: 70vw;\n  text-align: center;\n  margin: 0px auto;\n  margin-top; 30px\n  margin-top; 30px\n  display: block;\n  background-color: #00000;\n  color: white;\n  font-size: medium;\n  \n  `;\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [!usernameGood && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Styledp, {\n        style: {\n          padding: \"10px\",\n          paddingTop: \"25px\"\n        },\n        children: \"Invalid link/username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          paddingTop: \"20px\",\n          paddingBottom: \"20px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/\",\n          style: {\n            padding: \"10px\",\n            minWidth: \"100px\",\n            textDecoration: \"underline\"\n          },\n          children: \"Click here to create an exhibit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 22\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        display: \"flex\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: infgif,\n        alt: \"loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 101\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"imageGallery\",\n      style: {\n        visibility: \"hidden\"\n      },\n      className: \"grid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-sizer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Hero, \"lt7HBJLW8UCLKY8kCbWEI/zvDXI=\");\n\n_c = Hero;\nHero.propTypes = propTypes;\nHero.defaultProps = defaultProps;\nexport default Hero;\n\nvar _c;\n\n$RefreshReg$(_c, \"Hero\");","map":{"version":3,"sources":["/Users/charlie/code/ex/exhiibeo/src/components/sections/Hero.js"],"names":["React","useState","useEffect","Masonry","imagesLoaded","infgif","PropTypes","styled","propTypes","navPosition","string","hideNav","bool","hideSignin","bottomOuterDivider","bottomDivider","defaultProps","Hero","className","topOuterDivider","topDivider","hasBgColor","invertColor","props","loading","setloading","usernameGood","setUsernameGood","query","fetchGraphQL","operationsDoc","operationName","variables","result","fetch","method","body","JSON","stringify","json","objktidArray","doFetch","wallet","errors","data","console","error","hic_et_nunc_token_holder","linkarray","i","length","link","token","display_uri","split","linkstring","objkt","id","showImages","posts","document","querySelectorAll","loadmason","changeVisibility","posts2","imgArray","count","inarray","imagelist","indexOf","div","createElement","linka","href","style","getElementById","appendChild","img","Image","src","idd","window","location","log","elem","getElementsByClassName","j","item","width","grid","querySelector","itemSelector","percentPosition","vis","visibility","urllink","toString","arrlink","username","getDatas","isValid","good","axios","require","get","then","res","children","value","name","catch","Styledp","p","textAlign","padding","paddingTop","paddingBottom","minWidth","textDecoration","alignItems","justifyContent","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Masonry from 'masonry-layout';\nimport imagesLoaded from 'imagesloaded';\nimport infgif from './img/infloading.gif'\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst propTypes = {\n  navPosition: PropTypes.string,\n  hideNav: PropTypes.bool,\n  hideSignin: PropTypes.bool,\n  bottomOuterDivider: PropTypes.bool,\n  bottomDivider: PropTypes.bool,\n\n}\n\nconst defaultProps = {\n  navPosition: '',\n  hideNav: false,\n  hideSignin: false,\n  bottomOuterDivider: false,\n  bottomDivider: false\n}\nconst Hero = ({\n  className,\n  topOuterDivider,\n  bottomOuterDivider,\n  hideNav,\n  hideSignin,\n  topDivider,\n  bottomDivider,\n  hasBgColor,\n  invertColor,\n  ...props\n}) => {\n  const [loading, setloading] = useState(false);\n  const [usernameGood, setUsernameGood] = useState(true);\n  const query = `\n  query collectorGallery($address: String!) {\n    hic_et_nunc_token_holder(where: {holder_id: {_eq: $address}, quantity: {_gt: \"0\"}, token: {supply: {_gt: \"0\"}}}, order_by: {id: desc}) {\n      token {\n        id\n        artifact_uri\n        display_uri\n        thumbnail_uri\n        timestamp\n        mime\n        title\n        description\n        supply\n        token_tags {\n          tag {\n            tag\n          }\n        }\n        creator {\n          address\n        }\n        swaps(where: {status: {_eq: \"0\"}}, order_by: {price: asc}) {\n          amount\n          amount_left\n          creator_id\n          price\n        }\n      }\n    }\n  }\n  `;\n\n//todo make it say emit sucks if he uses his username\n  async function fetchGraphQL(operationsDoc, operationName, variables) {\n    const result = await fetch(\n      \"https://api.hicdex.com/v1/graphql\",\n      {\n        method: \"POST\",\n        body: JSON.stringify({\n          query: operationsDoc,\n          variables: variables,\n          operationName: operationName\n        })\n      }\n    );\n\n    return await result.json();\n  }\n  var objktidArray = [];\n\n  async function doFetch(wallet) {\n    setloading(true)\n    const { errors, data } = await fetchGraphQL(query, \"collectorGallery\", { \"address\": wallet });\n    if (errors) {\n      console.error(errors);\n    }\n    const result = data.hic_et_nunc_token_holder\n\n    var linkarray = [] //array of ipfs links for the img divs\n    for (var i = 0; i < result.length; i++) {\n      var link = result[i].token.display_uri.split('/')\n      var linkstring = \"https://ipfs.io/ipfs/\" + link[2];\n      linkarray[i] = linkstring\n      var objkt = result[i].token.id\n      objktidArray[i] = objkt\n    }\n    await showImages(linkarray)\n\n    var posts = document.querySelectorAll('.images');\n    imagesLoaded(posts, function () {\n      loadmason()\n      setloading(false)\n      changeVisibility()\n    });\n    var posts2 = document.querySelectorAll('.images2');\n    imagesLoaded(posts2, function () {\n      loadmason()\n    });\n\n  }\n\n  function showImages(imgArray) {\n    var count = 0\n    for (var i = 0; i < imgArray.length; i++) {\n      var inarray = false\n      if (imagelist.indexOf(objktidArray[i]) > -1) {\n        inarray = true\n        count = count + 1\n      }\n      if (inarray) {\n        var div = document.createElement(\"a\");\n        div.className = \"grid-item\"\n        div.id = objktidArray[i]\n\n        var linka = \"https://www.hicetnunc.xyz/objkt/\" + objktidArray[i]\n        div.href = linka\n        div.style = \"width: 33%;\"\n        document.getElementById(\"imageGallery\").appendChild(div);\n\n        var img = new Image();\n        img.src = imgArray[i]\n        img.style = \"width: 100%;\"\n        if (i < 20) {\n          img.className = \"images\"\n        }\n        else {\n          img.className = \"images2\"\n        }\n        var idd = objktidArray[i]\n\n        document.getElementById(idd).appendChild(img);\n\n      }\n\n    }\n    if (count === 0) {\n      window.location.href = \"/\";\n      console.log(\"account page\")\n    }\n    var elem = document.getElementsByClassName('grid-item');\n    if (elem.length < 4) {\n      for (var j = 0; j < elem.length; ++j) {\n        var item = elem[j];\n        item.style.width = \"100%\"\n      }\n    }\n\n  }\n  function loadmason() {\n    var grid = document.querySelector('.grid');\n    new Masonry(grid, {\n      itemSelector: '.grid-item',\n      percentPosition: true\n    });\n\n  }\n  function changeVisibility() {\n    const vis = document.getElementById(\"imageGallery\").style.visibility;\n    if (vis === 'hidden') {\n      document.getElementById(\"imageGallery\").style.visibility = 'visible'\n\n    }\n  }\n\n  useEffect(() => {\n    const urllink = window.location.href.toString();\n\n    const arrlink = urllink.split(\"?\");\n    const username = arrlink[1]\n    if (username) {\n      getDatas(username)\n    }\n  }, [])\n\n  async function isValid(wallet) {\n    if (wallet.length === 36) {\n      doFetch(wallet)\n    }\n\n  }\n  var imagelist = \"\"//from get, list of images user wants to display\n\n  function getDatas(username) {\n    var good = false\n    const axios = require('axios')\n    axios\n      .get('https://api.better-call.dev/v1/contract/mainnet/KT1VTp8ZBBrScQmVVTZRoQE28gx4fMWTTW6b/storage', {\n      })\n      .then(res => {\n        for (var i in res.data[0].children) {\n          if (res.data[0].children[i].children[1].value === username) {\n            imagelist = res.data[0].children[i].children[0].value\n            good = true\n            isValid(res.data[0].children[i].name)\n          }\n        }\n        if(!good){\n          setUsernameGood(false)\n        }\n      })\n      .catch(error => {\n        console.error(error)\n      })\n\n  }\n  const Styledp = styled.p`\n  border-top-style: hidden;\n  border-right-style: hidden;\n  border-left-style: hidden;\n  border-bottom-style: hidden;\n  width: 70vw;\n  text-align: center;\n  margin: 0px auto;\n  margin-top; 30px\n  margin-top; 30px\n  display: block;\n  background-color: #00000;\n  color: white;\n  font-size: medium;\n  \n  `;\n \n  return (\n\n    <section\n    >\n   {!usernameGood && <div style={{ textAlign: \"center\" }}>\n          <Styledp style={{ padding: \"10px\", paddingTop:\"25px\" }}>Invalid link/username</Styledp>\n          <div style={{ paddingTop: \"20px\", paddingBottom: \"20px\" }}>\n          </div>\n          <p><a href=\"/\"  style={{ padding: \"10px\", minWidth: \"100px\", textDecoration:\"underline\" }}>Click here to create an exhibit</a></p>\n        </div>}\n      {loading && <div style={{ alignItems: \"center\", justifyContent: \"center\", display: \"flex\" }} ><img src={infgif} alt=\"loading...\" /></div>}\n      <div id='imageGallery' style={{ visibility: \"hidden\" }} className=\"grid\">\n        <div className=\"grid-sizer\"></div>\n      </div>\n    </section>\n  );\n}\n\nHero.propTypes = propTypes;\nHero.defaultProps = defaultProps;\n\nexport default Hero;"]},"metadata":{},"sourceType":"module"}