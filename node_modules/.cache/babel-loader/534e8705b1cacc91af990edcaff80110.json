{"ast":null,"code":"import _regeneratorRuntime from\"/Users/charlie/code/ex/exhiibeo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/charlie/code/ex/exhiibeo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _taggedTemplateLiteral from\"/Users/charlie/code/ex/exhiibeo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _asyncToGenerator from\"/Users/charlie/code/ex/exhiibeo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/charlie/code/ex/exhiibeo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/charlie/code/ex/exhiibeo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _templateObject,_templateObject2,_templateObject3;var _excluded=[\"className\",\"topOuterDivider\",\"bottomOuterDivider\",\"hideNav\",\"hideSignin\",\"topDivider\",\"bottomDivider\",\"hasBgColor\",\"invertColor\"];import React,{useState,useEffect,useRef}from'react';import Masonry from'masonry-layout';import imagesLoaded from'imagesloaded';import infgif from'./img/infloading.gif';import classNames from'classnames';import{TezosToolkit}from\"@taquito/taquito\";import{DAppClient,TezosOperationType}from\"@airgap/beacon-sdk\";import\"./account.css\";import MiddleEllipsis from\"react-middle-ellipsis\";import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Tezos=new TezosToolkit(\"https://mainnet-tezos.giganode.io\");var wallet=new DAppClient({name:\"Exhibeo\"});var objktArray=[];Tezos.setWalletProvider(wallet);var defaultProps={navPosition:'',hideNav:false,hideSignin:false,bottomOuterDivider:false,bottomDivider:false};var Hero=function Hero(_ref){var _ref2;var className=_ref.className,topOuterDivider=_ref.topOuterDivider,bottomOuterDivider=_ref.bottomOuterDivider,hideNav=_ref.hideNav,hideSignin=_ref.hideSignin,topDivider=_ref.topDivider,bottomDivider=_ref.bottomDivider,hasBgColor=_ref.hasBgColor,invertColor=_ref.invertColor,props=_objectWithoutProperties(_ref,_excluded);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setloading=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),notloggedin=_useState4[0],setnotloggedin=_useState4[1];var query=\"\\n  query collectorGallery($address: String!) {\\n    hic_et_nunc_token_holder(where: {holder_id: {_eq: $address}, quantity: {_gt: \\\"0\\\"}, token: {supply: {_gt: \\\"0\\\"}}}, order_by: {id: desc}) {\\n      token {\\n        id\\n        artifact_uri\\n        display_uri\\n        thumbnail_uri\\n        timestamp\\n        mime\\n        title\\n        description\\n        supply\\n        token_tags {\\n          tag {\\n            tag\\n          }\\n        }\\n        creator {\\n          address\\n        }\\n        swaps(where: {status: {_eq: \\\"0\\\"}}, order_by: {price: asc}) {\\n          amount\\n          amount_left\\n          creator_id\\n          price\\n        }\\n      }\\n    }\\n  }\\n  \";function fetchGraphQL(_x,_x2,_x3){return _fetchGraphQL.apply(this,arguments);}function _fetchGraphQL(){_fetchGraphQL=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(operationsDoc,operationName,variables){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.hicdex.com/v1/graphql\",{method:\"POST\",body:JSON.stringify({query:operationsDoc,variables:variables,operationName:operationName})});case 2:result=_context.sent;_context.next=5;return result.json();case 5:return _context.abrupt(\"return\",_context.sent);case 6:case\"end\":return _context.stop();}}},_callee);}));return _fetchGraphQL.apply(this,arguments);}var objktidArray=[];var linkarray=[];function doFetch(_x4){return _doFetch.apply(this,arguments);}function _doFetch(){_doFetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(wallet){var _yield$fetchGraphQL,errors,data,result,i,link,linkstring,objkt,grid,imgLoad;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setloading(true);_context2.next=3;return fetchGraphQL(query,\"collectorGallery\",{\"address\":wallet});case 3:_yield$fetchGraphQL=_context2.sent;errors=_yield$fetchGraphQL.errors;data=_yield$fetchGraphQL.data;if(errors){console.error(errors);}result=data.hic_et_nunc_token_holder;for(i=0;i<result.length;i++){link=result[i].token.display_uri.split('/');linkstring=\"https://ipfs.io/ipfs/\"+link[2];linkarray[i]=linkstring;objkt=result[i].token.id;objktidArray[i]=objkt;}_context2.next=11;return showImages(linkarray);case 11:grid=document.querySelector('.grid2');imgLoad=imagesLoaded(grid);setloading(false);changeVisibility();imgLoad.on('progress',function(instance,image){//   var result = image.isLoaded ? 'loaded' : 'broken';\n// console.log( 'image is ' + result + ' for ' + image.img.src );\nloadmason();});case 16:case\"end\":return _context2.stop();}}},_callee2);}));return _doFetch.apply(this,arguments);}function loadmason(){var grid=document.querySelector('.grid2');new Masonry(grid,{itemSelector:'.grid-item2',percentPosition:true});}function showImages(imgArray){for(var i=0;i<imgArray.length;i++){var div=document.createElement(\"div\");div.className=\"grid-item2\";div.id=objktidArray[i];div.onclick=function(opt){return function(){imageClicked(opt);};}(div.id);div.style=\"width: 33%;\";document.getElementById(\"imageGallery2\").appendChild(div);var img=new Image();img.src=imgArray[i];img.style=\"width: 100%;\";img.className=\"images\";var idd=objktidArray[i];document.getElementById(idd).appendChild(img);}}// Styling a regular HTML input\nvar StyledInput=styled.input(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    border-top-style: hidden;\\n    border-right-style: hidden;\\n    border-left-style: hidden;\\n    border-bottom-style: groove;\\n    width: 25vw;\\n    text-align: center;\\n    margin: 0px auto;\\n    margin-top; 30px\\n    margin-top; 30px\\n    display: block;\\n    background-color: #000000;\\n    color: white;\\n\\n\"])));var Styledp=styled.p(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\nborder-top-style: hidden;\\nborder-right-style: hidden;\\nborder-left-style: hidden;\\nborder-bottom-style: hidden;\\nwidth: 70vw;\\ntext-align: center;\\nmargin: 0px auto;\\nmargin-top; 30px\\nmargin-top; 30px\\ndisplay: block;\\nbackground-color: #000000;\\ncolor: white;\\nfont-size: medium;\\n\\n\"])));var Styledb=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\nborder-top-style: groove;\\nborder-right-style: groove;\\nborder-left-style: groove;\\nborder-bottom-style: groove;\\nwidth: 15vw;\\ntext-align: center;\\nmargin: 0px auto;\\nmargin-top; 30px\\nmargin-top; 30px\\ndisplay: block;\\nbackground-color: #000000;\\ncolor: white;\\n\\n\"])));function changeVisibility(){var vis=document.getElementById(\"imageGallery2\").style.visibility;if(vis==='hidden'){document.getElementById(\"imageGallery2\").style.visibility='visible';}}useEffect(function(){//AKA onload\nvar urllink=window.location.href.toString();var arrlink=urllink.split(\"?\");var username=arrlink[1];if(!username){setnotloggedin(true);checkWalletConnection();}},[]);var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),walletModalActive=_useState6[0],setWalletmodalactive=_useState6[1];var openModal=function openModal(e){e.preventDefault();setWalletmodalactive(true);};var closeModal=function closeModal(e){e.preventDefault();setWalletmodalactive(false);};var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),walletAddress=_useState8[0],setWalletAddress=_useState8[1];function checkWalletConnection(){return _checkWalletConnection.apply(this,arguments);}function _checkWalletConnection(){_checkWalletConnection=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var activeAccount;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return wallet.getActiveAccount();case 2:activeAccount=_context3.sent;if(activeAccount){setWalletAddress(activeAccount.address);setnotloggedin(false);doFetch(activeAccount.address);}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _checkWalletConnection.apply(this,arguments);}function connectWallet(){return _connectWallet.apply(this,arguments);}function _connectWallet(){_connectWallet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var activeAccount,permissions;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return wallet.getActiveAccount();case 2:activeAccount=_context4.sent;if(!activeAccount){_context4.next=7;break;}openModal();_context4.next=20;break;case 7:_context4.prev=7;_context4.next=10;return wallet.requestPermissions();case 10:permissions=_context4.sent;console.log(\"Got permissions:\",permissions.address);//wallet connected\nsetWalletAddress(permissions.address);doFetch(permissions.address);window.location.reload(false);_context4.next=20;break;case 17:_context4.prev=17;_context4.t0=_context4[\"catch\"](7);console.log(\"Got error:\",_context4.t0);case 20:case\"end\":return _context4.stop();}}},_callee4,null,[[7,17]]);}));return _connectWallet.apply(this,arguments);}function disconnectWallet(){return _disconnectWallet.apply(this,arguments);}function _disconnectWallet(){_disconnectWallet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return wallet.clearActiveAccount();case 2:window.location.reload(false);case 3:case\"end\":return _context5.stop();}}},_callee5);}));return _disconnectWallet.apply(this,arguments);}function addToImageArray(id){objktArray.push(id);}function removeFromImageArray(id){var imgindex=objktArray.indexOf(id);objktArray.splice(imgindex,1);}function showInstructions(){if(document.getElementById(\"instructions\").style.display===\"block\"){document.getElementById(\"instructions\").style.display=\"none\";}else{document.getElementById(\"instructions\").style.display=\"block\";}}function imageClicked(id){var clickedImage=document.getElementById(id);if(clickedImage.style.borderStyle===\"dashed\"){clickedImage.style.borderStyle=\"none\";removeFromImageArray(id);}else{clickedImage.style.border=\"5px\";clickedImage.style.borderColor=\"white\";clickedImage.style.borderStyle=\"dashed\";addToImageArray(id);}}function usernameTaken(_x5){return _usernameTaken.apply(this,arguments);}function _usernameTaken(){_usernameTaken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(username){var axios,taken;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:axios=require('axios');taken=false;_context6.next=4;return axios.get('https://api.better-call.dev/v1/contract/mainnet/KT1V69m3Q6yAwQfo1PgFDVUeWgmtu52J2JEx/storage',{}).then(function(res){for(var i in res.data[0].children){if(res.data[0].children[i].children[1].value===username){if(res.data[0].children[i].name===walletAddress){console.log(\"username belongs to owner\");taken=false;}else{console.log(\"username doesnt belong to owner\");taken=true;}}}}).catch(function(error){console.error(error);});case 4:return _context6.abrupt(\"return\",taken);case 5:case\"end\":return _context6.stop();}}},_callee6);}));return _usernameTaken.apply(this,arguments);}function saveData(){return _saveData.apply(this,arguments);}//TODO, after submission wait until blockchain inclusion, then forward to profile\n//Do something about images not loading\nfunction _saveData(){_saveData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var imga,EXHIBEO_CONTRACT,username,userTaken,result,linka,adiv,a2div;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:imga=objktArray.toString();EXHIBEO_CONTRACT=\"KT1V69m3Q6yAwQfo1PgFDVUeWgmtu52J2JEx\";username=document.getElementById(\"username\").value;if(!(username===\"\")){_context7.next=7;break;}document.getElementById(\"warningtext\").innerHTML=\"Username cannot be empty\";_context7.next=45;break;case 7:if(!username.includes(\" \")){_context7.next=11;break;}document.getElementById(\"warningtext\").innerHTML=\"Username cannot contain spaces\";_context7.next=45;break;case 11:if(!(imga===\"\")){_context7.next=15;break;}document.getElementById(\"warningtext\").innerHTML=\"You cannot choose 0 images, select some images from below to display on your profile, then click save.\";_context7.next=45;break;case 15:_context7.next=17;return usernameTaken(username);case 17:userTaken=_context7.sent;console.log(userTaken);if(!userTaken){_context7.next=23;break;}document.getElementById(\"warningtext\").innerHTML=\"Username is already taken, if you believe this username already belongs to you, make sure you are using the same wallet as when you first created that username.\";_context7.next=45;break;case 23:if(userTaken){_context7.next=45;break;}_context7.prev=24;_context7.next=27;return wallet.requestOperation({operationDetails:[{kind:TezosOperationType.TRANSACTION,destination:EXHIBEO_CONTRACT,amount:\"0\",parameters:{entrypoint:\"default\",value:{prim:\"Pair\",\"args\":[{string:imga},{string:username}]}}}]});case 27:result=_context7.sent;console.log(result);//show link\nlinka=\"https://exhibeo.xyz/?\"+username;//document.getElementById(\"linkforprofile\").setAttribute('href',linka) \nadiv=document.createElement(\"a\");adiv.href=linka;adiv.style=\"text-decoration: underline; font-size: xxx-large;\";adiv.innerHTML=\"Link to your profile\";document.getElementById(\"linkforprofile\").appendChild(adiv);a2div=document.createElement(\"a\");a2div.style=\"font-size: x-large;\";a2div.innerHTML=\"Click the link and give the page ~30 seconds for blockchain confirmation. Then it will load your images\";document.getElementById(\"confirmtext\").appendChild(a2div);_context7.next=45;break;case 41:_context7.prev=41;_context7.t0=_context7[\"catch\"](24);console.log(\"The contract call failed and the following error was returned:\");console.log(_context7.t0);case 45:case\"end\":return _context7.stop();}}},_callee7,null,[[24,41]]);}));return _saveData.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"section\",{children:[!walletModalActive&&/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:classNames(bottomDivider&&'has-bottom-divider'),children:!hideNav&&/*#__PURE__*/_jsx(\"div\",{children:!hideSignin&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:\"15px\",paddingBottom:\"15px\",alignItems:\"center\",justifyContent:\"center\",display:\"flex\"},children:[!walletAddress&&/*#__PURE__*/_jsx(\"button\",{style:{display:'inline-flex',color:'white',backgroundColor:'#000000',fontWeight:'light',border:'solid',borderColor:'white',borderTop:'none',borderLeft:\"none\",borderRight:'none',borderWidth:'2px',float:'right'},onClick:connectWallet,children:\"Sign in with wallet to customize\"}),walletAddress&&/*#__PURE__*/_jsx(\"span\",{style:{display:'inline-flex',color:'white',backgroundColor:'#000000',fontWeight:'light',border:'solid',borderColor:'white',borderTop:'none',borderLeft:\"none\",borderRight:'none',borderWidth:'2px',float:'right'},children:/*#__PURE__*/_jsx(\"button\",{style:(_ref2={maxWidth:'200px',fontWeight:'light',display:'inline-block',color:'white',backgroundColor:'#000000'},_defineProperty(_ref2,\"fontWeight\",'light'),_defineProperty(_ref2,\"border\",'solid'),_defineProperty(_ref2,\"borderColor\",'white'),_defineProperty(_ref2,\"borderTop\",'none'),_defineProperty(_ref2,\"borderLeft\",\"none\"),_defineProperty(_ref2,\"borderRight\",'none'),_defineProperty(_ref2,\"borderWidth\",'2px'),_defineProperty(_ref2,\"float\",'right'),_ref2),className:\"button button-primary button-wide-mobile button-sm\",onClick:openModal,children:/*#__PURE__*/_jsx(MiddleEllipsis,{children:/*#__PURE__*/_jsx(\"span\",{children:walletAddress})})})})]})})})})}),walletModalActive&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'white',fontWeight:'bold',backgroundColor:'#000000',paddingTop:20,paddingBottom:12,paddingLeft:24},onClick:closeModal,className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',paddingTop:4,paddingBottom:4,textOverflow:'ellipsis',overflow:'hidden',whiteSpace:'nowrap'},children:[\"Address: \",walletAddress]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',paddingTop:4,paddingBottom:4},children:/*#__PURE__*/_jsx(\"button\",{style:{display:'inline-block',color:'white',backgroundColor:'#000000',fontWeight:'light',border:'solid',borderColor:'white',borderTop:'none',borderLeft:\"none\",borderRight:'none',borderWidth:'2px'},className:\"button button-primary button-wide-mobile button-sm\",onClick:disconnectWallet,children:\"Logout\"})})]}),walletAddress&&/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:\"15px\",paddingBottom:\"15px\",alignItems:\"center\",justifyContent:\"center\",display:\"flex\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsxs(Styledp,{onClick:showInstructions,style:{padding:\"5px\"},children:[\"Enter a username and select the images you wish to display. For more detailed instructions \",/*#__PURE__*/_jsx(\"u\",{children:\"click here\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"instructions\",style:{display:\"none\"},children:[/*#__PURE__*/_jsx(Styledp,{style:{padding:\"5px\"},children:\"STEPS\"}),/*#__PURE__*/_jsxs(Styledp,{style:{padding:\"5px\"},children:[/*#__PURE__*/_jsx(\"big\",{children:\"1\"}),\". Sign in with your wallet that contains the NFTs you wish to put in your exhibit\"]}),/*#__PURE__*/_jsxs(Styledp,{style:{padding:\"5px\"},children:[/*#__PURE__*/_jsx(\"big\",{children:\"2\"}),\". Enter a username. This will be turned into the link for your account, no spaces allowed\"]}),/*#__PURE__*/_jsxs(Styledp,{style:{padding:\"5px\"},children:[/*#__PURE__*/_jsx(\"big\",{children:\"3\"}),\". Select images you want to display on your profile. The images will be displayed in the order you select them.\"]}),/*#__PURE__*/_jsxs(Styledp,{style:{padding:\"5px\"},children:[/*#__PURE__*/_jsx(\"big\",{children:\"4\"}),\". Click save, if the username is taken an error should appear.\"]}),/*#__PURE__*/_jsx(Styledp,{style:{padding:\"5px\"},children:\"Due to the data being stored on a smart contract, the saving will take place as a transaction with 0 fees (besides gas + storage if needed). Along with this it will take about 30 seconds for your profile to be updated once you submit the transaction\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:\"20px\",paddingBottom:\"20px\"},children:/*#__PURE__*/_jsx(StyledInput,{autoComplete:\"off\",id:\"username\",placeholder:\"Username\"})}),/*#__PURE__*/_jsx(\"p\",{id:\"warningtext\",style:{padding:\"10px\",color:\"red\",fontSize:\"xl\"}}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Styledb,{onClick:saveData,style:{padding:\"10px\",minWidth:\"100px\"},children:\"Save\"})})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"linkforprofile\",style:{padding:\"10px\",textAlign:\"center\"}}),/*#__PURE__*/_jsx(\"div\",{id:\"confirmtext\",style:{padding:\"10px\",textAlign:\"center\"}}),loading&&/*#__PURE__*/_jsx(\"div\",{style:{alignItems:\"center\",justifyContent:\"center\",display:\"flex\"},children:/*#__PURE__*/_jsx(\"img\",{src:infgif,alt:\"loading...\"})}),notloggedin&&/*#__PURE__*/_jsx(\"div\",{style:{alignItems:\"center\",justifyContent:\"center\",display:\"flex\"},children:/*#__PURE__*/_jsx(\"img\",{src:infgif,alt:\"loading...\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"imageGallery2\",style:{visibility:\"hidden\"},className:\"grid2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid-sizer\"})})]});};Hero.defaultProps=defaultProps;export default Hero;","map":{"version":3,"sources":["/Users/charlie/code/ex/exhiibeo/src/components/sections/Account.js"],"names":["React","useState","useEffect","useRef","Masonry","imagesLoaded","infgif","classNames","TezosToolkit","DAppClient","TezosOperationType","MiddleEllipsis","styled","Tezos","wallet","name","objktArray","setWalletProvider","defaultProps","navPosition","hideNav","hideSignin","bottomOuterDivider","bottomDivider","Hero","className","topOuterDivider","topDivider","hasBgColor","invertColor","props","loading","setloading","notloggedin","setnotloggedin","query","fetchGraphQL","operationsDoc","operationName","variables","fetch","method","body","JSON","stringify","result","json","objktidArray","linkarray","doFetch","errors","data","console","error","hic_et_nunc_token_holder","i","length","link","token","display_uri","split","linkstring","objkt","id","showImages","grid","document","querySelector","imgLoad","changeVisibility","on","instance","image","loadmason","itemSelector","percentPosition","imgArray","div","createElement","onclick","opt","imageClicked","style","getElementById","appendChild","img","Image","src","idd","StyledInput","input","Styledp","p","Styledb","button","vis","visibility","urllink","window","location","href","toString","arrlink","username","checkWalletConnection","walletModalActive","setWalletmodalactive","openModal","e","preventDefault","closeModal","walletAddress","setWalletAddress","getActiveAccount","activeAccount","address","connectWallet","requestPermissions","permissions","log","reload","disconnectWallet","clearActiveAccount","addToImageArray","push","removeFromImageArray","imgindex","indexOf","splice","showInstructions","display","clickedImage","borderStyle","border","borderColor","usernameTaken","axios","require","taken","get","then","res","children","value","catch","saveData","imga","EXHIBEO_CONTRACT","innerHTML","includes","userTaken","requestOperation","operationDetails","kind","TRANSACTION","destination","amount","parameters","entrypoint","prim","string","linka","adiv","a2div","paddingTop","paddingBottom","alignItems","justifyContent","color","backgroundColor","fontWeight","borderTop","borderLeft","borderRight","borderWidth","float","maxWidth","paddingLeft","textAlign","textOverflow","overflow","whiteSpace","padding","fontSize","minWidth"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Masonry from 'masonry-layout';\nimport imagesLoaded from 'imagesloaded';\nimport infgif from './img/infloading.gif'\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { TezosToolkit } from \"@taquito/taquito\";\nimport { DAppClient, TezosOperationType } from \"@airgap/beacon-sdk\";\nimport \"./account.css\"\n\nimport MiddleEllipsis from \"react-middle-ellipsis\";\nimport styled from 'styled-components';\nconst Tezos = new TezosToolkit(\"https://mainnet-tezos.giganode.io\");\nconst wallet = new DAppClient({ name: \"Exhibeo\" });\n\n\n\nvar objktArray = [];\n\nTezos.setWalletProvider(wallet);\n\nconst propTypes = {\n  navPosition: PropTypes.string,\n  hideNav: PropTypes.bool,\n  hideSignin: PropTypes.bool,\n  bottomOuterDivider: PropTypes.bool,\n  bottomDivider: PropTypes.bool,\n\n}\n\nconst defaultProps = {\n  navPosition: '',\n  hideNav: false,\n  hideSignin: false,\n  bottomOuterDivider: false,\n  bottomDivider: false\n}\nconst Hero = ({\n  className,\n  topOuterDivider,\n  bottomOuterDivider,\n  hideNav,\n  hideSignin,\n  topDivider,\n  bottomDivider,\n  hasBgColor,\n  invertColor,\n  ...props\n}) => {\n  const [loading, setloading] = useState(false);\n  const [notloggedin, setnotloggedin] = useState(true);\n  const query = `\n  query collectorGallery($address: String!) {\n    hic_et_nunc_token_holder(where: {holder_id: {_eq: $address}, quantity: {_gt: \"0\"}, token: {supply: {_gt: \"0\"}}}, order_by: {id: desc}) {\n      token {\n        id\n        artifact_uri\n        display_uri\n        thumbnail_uri\n        timestamp\n        mime\n        title\n        description\n        supply\n        token_tags {\n          tag {\n            tag\n          }\n        }\n        creator {\n          address\n        }\n        swaps(where: {status: {_eq: \"0\"}}, order_by: {price: asc}) {\n          amount\n          amount_left\n          creator_id\n          price\n        }\n      }\n    }\n  }\n  `;\n\n\n  async function fetchGraphQL(operationsDoc, operationName, variables) {\n    const result = await fetch(\n      \"https://api.hicdex.com/v1/graphql\",\n      {\n        method: \"POST\",\n        body: JSON.stringify({\n          query: operationsDoc,\n          variables: variables,\n          operationName: operationName\n        })\n      }\n    );\n\n    return await result.json();\n  }\n  var objktidArray = [];\n  var linkarray = [];\n\n  async function doFetch(wallet) {\n    setloading(true)\n    const { errors, data } = await fetchGraphQL(query, \"collectorGallery\", { \"address\": wallet });\n    if (errors) {\n      console.error(errors);\n    }\n    const result = data.hic_et_nunc_token_holder\n    for (var i = 0; i < result.length; i++) {\n      var link = result[i].token.display_uri.split('/')\n      var linkstring = \"https://ipfs.io/ipfs/\" + link[2];\n      linkarray[i] = linkstring\n      var objkt = result[i].token.id\n      objktidArray[i] = objkt\n    }\n\n\n    await showImages(linkarray)\n    var grid = document.querySelector('.grid2');\n    var imgLoad = imagesLoaded( grid );\n    setloading(false)\n    changeVisibility()\n    imgLoad.on( 'progress', function( instance, image ) {\n    //   var result = image.isLoaded ? 'loaded' : 'broken';\n    // console.log( 'image is ' + result + ' for ' + image.img.src );\n      loadmason()\n    });\n\n  }\n  function loadmason() {\n    var grid = document.querySelector('.grid2');\n    new Masonry(grid, {\n      itemSelector: '.grid-item2',\n      percentPosition: true\n    });\n  }\n  function showImages(imgArray) {\n\n    for (var i = 0; i < imgArray.length; i++) {\n      var div = document.createElement(\"div\");\n      div.className = \"grid-item2\"\n      div.id = objktidArray[i]\n      div.onclick = (function (opt) {\n        return function () {\n          imageClicked(opt);\n        };\n      })(div.id);\n\n      div.style = \"width: 33%;\"\n      document.getElementById(\"imageGallery2\").appendChild(div);\n\n      var img = new Image();\n      img.src = imgArray[i]\n      img.style = \"width: 100%;\"\n      img.className = \"images\"\n      var idd = objktidArray[i]\n\n      document.getElementById(idd).appendChild(img);\n    }\n  }\n\n  // Styling a regular HTML input\n  const StyledInput = styled.input`\n    border-top-style: hidden;\n    border-right-style: hidden;\n    border-left-style: hidden;\n    border-bottom-style: groove;\n    width: 25vw;\n    text-align: center;\n    margin: 0px auto;\n    margin-top; 30px\n    margin-top; 30px\n    display: block;\n    background-color: #000000;\n    color: white;\n\n`;\n  const Styledp = styled.p`\nborder-top-style: hidden;\nborder-right-style: hidden;\nborder-left-style: hidden;\nborder-bottom-style: hidden;\nwidth: 70vw;\ntext-align: center;\nmargin: 0px auto;\nmargin-top; 30px\nmargin-top; 30px\ndisplay: block;\nbackground-color: #000000;\ncolor: white;\nfont-size: medium;\n\n`;\n  const Styledb = styled.button`\nborder-top-style: groove;\nborder-right-style: groove;\nborder-left-style: groove;\nborder-bottom-style: groove;\nwidth: 15vw;\ntext-align: center;\nmargin: 0px auto;\nmargin-top; 30px\nmargin-top; 30px\ndisplay: block;\nbackground-color: #000000;\ncolor: white;\n\n`;\n\n  function changeVisibility() {\n    const vis = document.getElementById(\"imageGallery2\").style.visibility;\n    if (vis === 'hidden') {\n      document.getElementById(\"imageGallery2\").style.visibility = 'visible'\n    }\n  }\n\n  useEffect(() => {\n    //AKA onload\n    const urllink = window.location.href.toString();\n    const arrlink = urllink.split(\"?\");\n    const username = arrlink[1]\n    if (!username) {\n      setnotloggedin(true)\n      checkWalletConnection();\n    }\n  }, [])\n\n  const [walletModalActive, setWalletmodalactive] = useState(false);\n\n  const openModal = (e) => {\n    e.preventDefault();\n    setWalletmodalactive(true);\n  }\n\n  const closeModal = (e) => {\n    e.preventDefault();\n    setWalletmodalactive(false);\n  }\n\n\n  const [walletAddress, setWalletAddress] = useState(\"\");\n\n\n  async function checkWalletConnection() {\n    const activeAccount = await wallet.getActiveAccount();\n    if (activeAccount) {\n      setWalletAddress(activeAccount.address);\n      setnotloggedin(false)\n      doFetch(activeAccount.address)\n    }\n  }\n\n  async function connectWallet() {\n\n    const activeAccount = await wallet.getActiveAccount();\n\n    if (activeAccount) {\n      openModal();\n    } else {\n      try {\n        //console.log(\"Requesting permissions...\");\n        const permissions = await wallet.requestPermissions();\n        console.log(\"Got permissions:\", permissions.address);\n        //wallet connected\n        setWalletAddress(permissions.address);\n        doFetch(permissions.address);\n        window.location.reload(false);\n      } catch (error) {\n        console.log(\"Got error:\", error);\n      }\n    }\n\n  }\n  async function disconnectWallet() {\n\n    await wallet.clearActiveAccount();\n    window.location.reload(false);\n  }\n\n\n  function addToImageArray(id) {\n    objktArray.push(id);\n  }\n\n  function removeFromImageArray(id) {\n    var imgindex = objktArray.indexOf(id);\n    objktArray.splice(imgindex, 1);\n  }\n\n  function showInstructions() {\n    if (document.getElementById(\"instructions\").style.display === \"block\") {\n      document.getElementById(\"instructions\").style.display = \"none\"\n    } else {\n      document.getElementById(\"instructions\").style.display = \"block\"\n    }\n\n  }\n\n\n  function imageClicked(id) {\n    const clickedImage = document.getElementById(id);\n    if (clickedImage.style.borderStyle === \"dashed\") {\n      clickedImage.style.borderStyle = \"none\";\n      removeFromImageArray(id);\n    }\n    else {\n      clickedImage.style.border = \"5px\";\n      clickedImage.style.borderColor = \"white\";\n      clickedImage.style.borderStyle = \"dashed\";\n      addToImageArray(id);\n    }\n  }\n  async function usernameTaken(username) {\n    const axios = require('axios')\n    var taken = false\n    await axios\n      .get('https://api.better-call.dev/v1/contract/mainnet/KT1V69m3Q6yAwQfo1PgFDVUeWgmtu52J2JEx/storage', {\n      })\n      .then(res => {\n        for (var i in res.data[0].children) {\n          if (res.data[0].children[i].children[1].value === username) {\n            if (res.data[0].children[i].name === walletAddress) {\n              console.log(\"username belongs to owner\")\n              taken = false\n            }\n            else {\n              console.log(\"username doesnt belong to owner\")\n              taken = true\n\n            }\n          }\n        }\n      })\n      .catch(error => {\n        console.error(error)\n      })\n    return taken\n\n  }\n  async function saveData() {\n    var imga = objktArray.toString();\n    const EXHIBEO_CONTRACT = \"KT1V69m3Q6yAwQfo1PgFDVUeWgmtu52J2JEx\";\n    const username = document.getElementById(\"username\").value;\n    if (username === \"\") {\n      document.getElementById(\"warningtext\").innerHTML = \"Username cannot be empty\"\n    }\n    else if(username.includes(\" \")){\n      document.getElementById(\"warningtext\").innerHTML = \"Username cannot contain spaces\"\n    }\n    else if (imga === \"\") {\n      document.getElementById(\"warningtext\").innerHTML = \"You cannot choose 0 images, select some images from below to display on your profile, then click save.\"\n    }\n    else {\n      var userTaken = await usernameTaken(username)\n      console.log(userTaken)\n      if (userTaken) {\n        document.getElementById(\"warningtext\").innerHTML = \"Username is already taken, if you believe this username already belongs to you, make sure you are using the same wallet as when you first created that username.\"\n      } else if (!userTaken) {\n        try {\n          const result = await wallet.requestOperation({\n            operationDetails: [\n              {\n                kind: TezosOperationType.TRANSACTION,\n                destination: EXHIBEO_CONTRACT,\n                amount: \"0\",\n                parameters: {\n                  entrypoint: \"default\",\n                  value: {\n                    prim: \"Pair\",\n                    \"args\":\n                      [\n                        {\n                          string: imga\n                        },\n                        {\n                          string: username\n                        }\n                      ]\n                  },\n                },\n              },\n            ],\n          });\n\n          console.log(result);\n          //show link\n          var linka = \"https://exhibeo.xyz/?\" + username\n          //document.getElementById(\"linkforprofile\").setAttribute('href',linka) \n\n          var adiv = document.createElement(\"a\");\n          adiv.href = linka\n          adiv.style = \"text-decoration: underline; font-size: xxx-large;\"\n          adiv.innerHTML = \"Link to your profile\"\n          document.getElementById(\"linkforprofile\").appendChild(adiv);\n          var a2div = document.createElement(\"a\");\n          a2div.style = \"font-size: x-large;\"\n          a2div.innerHTML = \"Click the link and give the page ~30 seconds for blockchain confirmation. Then it will load your images\"\n          document.getElementById(\"confirmtext\").appendChild(a2div);\n        } catch (error) {\n          console.log(\n            `The contract call failed and the following error was returned:`\n          );\n          console.log(error);\n        }\n      }\n\n\n    }\n  }\n//TODO, after submission wait until blockchain inclusion, then forward to profile\n//Do something about images not loading\n  return (\n    <section\n    >\n      {!walletModalActive && <div className=\"container\">\n        <div className={\n          classNames(\n            bottomDivider && 'has-bottom-divider'\n          )}>\n          {!hideNav &&\n            <div >\n              {!hideSignin &&\n                <div\n                >\n                  <div style={{ paddingTop: \"15px\", paddingBottom: \"15px\", alignItems: \"center\", justifyContent: \"center\", display: \"flex\" }}>\n                    {!walletAddress && <button style={{ display: 'inline-flex', color: 'white', backgroundColor: '#000000', fontWeight: 'light', border: 'solid', borderColor: 'white', borderTop: 'none', borderLeft: \"none\", borderRight: 'none', borderWidth: '2px', float: 'right' }} onClick={connectWallet}>Sign in with wallet to customize</button>}\n                    {walletAddress && <span style={{ display: 'inline-flex', color: 'white', backgroundColor: '#000000', fontWeight: 'light', border: 'solid', borderColor: 'white', borderTop: 'none', borderLeft: \"none\", borderRight: 'none', borderWidth: '2px', float: 'right' }}><button style={{ maxWidth: '200px', fontWeight: 'light', display: 'inline-block', color: 'white', backgroundColor: '#000000', fontWeight: 'light', border: 'solid', borderColor: 'white', borderTop: 'none', borderLeft: \"none\", borderRight: 'none', borderWidth: '2px', float: 'right' }} className=\"button button-primary button-wide-mobile button-sm\" onClick={openModal}><MiddleEllipsis><span>{walletAddress}</span></MiddleEllipsis></button></span>}\n                  </div>\n                </div>}\n            </div>\n          }\n        </div>\n      </div>}\n      {walletModalActive && <div style={{ color: 'white', fontWeight: 'bold', backgroundColor: '#000000', paddingTop: 20, paddingBottom: 12, paddingLeft: 24 }} onClick={closeModal} className=\"container\">\n        <div style={{ textAlign: 'center', paddingTop: 4, paddingBottom: 4, textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: 'nowrap', }}>Address: {walletAddress}</div>\n        <div style={{ textAlign: 'center', paddingTop: 4, paddingBottom: 4, }}><button style={{ display: 'inline-block', color: 'white', backgroundColor: '#000000', fontWeight: 'light', border: 'solid', borderColor: 'white', borderTop: 'none', borderLeft: \"none\", borderRight: 'none', borderWidth: '2px', }} className=\"button button-primary button-wide-mobile button-sm\" onClick={disconnectWallet} >Logout</button></div>\n\n      </div>}\n      {walletAddress && <div style={{ paddingTop: \"15px\", paddingBottom: \"15px\", alignItems: \"center\", justifyContent: \"center\", display: \"flex\" }}>\n\n\n        <div style={{ textAlign: \"center\" }}>\n          <Styledp onClick={showInstructions} style={{ padding: \"5px\" }}>Enter a username and select the images you wish to display. For more detailed instructions <u>click here</u></Styledp>\n          <div id=\"instructions\" style={{ display: \"none\" }}>\n            <Styledp style={{ padding: \"5px\" }}>STEPS</Styledp>\n            <Styledp style={{ padding: \"5px\" }}><big>1</big>. Sign in with your wallet that contains the NFTs you wish to put in your exhibit</Styledp>\n            <Styledp style={{ padding: \"5px\" }}><big>2</big>. Enter a username. This will be turned into the link for your account, no spaces allowed</Styledp>\n            <Styledp style={{ padding: \"5px\" }}><big>3</big>. Select images you want to display on your profile. The images will be displayed in the order you select them.</Styledp>\n            <Styledp style={{ padding: \"5px\" }}><big>4</big>. Click save, if the username is taken an error should appear.</Styledp>\n            <Styledp style={{ padding: \"5px\" }}>Due to the data being stored on a smart contract, the saving will take place as a transaction with 0 fees (besides gas + storage if needed). Along with this it will take about 30 seconds for your profile to be updated once you submit the transaction</Styledp></div>\n          <div style={{ paddingTop: \"20px\", paddingBottom: \"20px\" }}>\n            <StyledInput autoComplete=\"off\" id=\"username\"\n              placeholder=\"Username\"\n            />\n          </div>\n          <p id=\"warningtext\" style={{ padding: \"10px\", color: \"red\", fontSize: \"xl\" }}></p>\n          <p><Styledb onClick={saveData} style={{ padding: \"10px\", minWidth: \"100px\" }}>Save</Styledb></p>\n        </div>\n\n      </div>}\n      <div id=\"linkforprofile\" style={{ padding: \"10px\", textAlign: \"center\" }}>\n      </div>\n      <div id=\"confirmtext\" style={{ padding: \"10px\", textAlign: \"center\" }}>\n      </div>\n      {loading && <div style={{ alignItems: \"center\", justifyContent: \"center\", display: \"flex\" }} ><img src={infgif} alt=\"loading...\" /></div>}\n      {notloggedin && <div style={{ alignItems: \"center\", justifyContent: \"center\", display: \"flex\" }} ><img src={infgif} alt=\"loading...\" /></div>}\n      <div id='imageGallery2' style={{ visibility: \"hidden\" }} className=\"grid2\">\n        <div className=\"grid-sizer\"></div>\n      </div>\n    </section>\n  );\n}\n\nHero.propTypes = propTypes;\nHero.defaultProps = defaultProps;\n\nexport default Hero;"]},"metadata":{},"sourceType":"module"}